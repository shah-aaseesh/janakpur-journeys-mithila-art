# Enable rewrite engine
RewriteEngine On
RewriteBase /

# Handle client-side routing
RewriteRule ^index\.html$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.html [L]

# Force correct MIME types for assets
<FilesMatch "\.(css)$">
  ForceType text/css
</FilesMatch>

<FilesMatch "\.(js)$">
  ForceType application/javascript
</FilesMatch>

<FilesMatch "\.(json)$">
  ForceType application/json
</FilesMatch>

<FilesMatch "\.(webp)$">
  ForceType image/webp
</FilesMatch>

<FilesMatch "\.(jpg|jpeg)$">
  ForceType image/jpeg
</FilesMatch>

<FilesMatch "\.(png)$">
  ForceType image/png
</FilesMatch>

<FilesMatch "\.(svg)$">
  ForceType image/svg+xml
</FilesMatch>

<FilesMatch "\.(woff2)$">
  ForceType font/woff2
</FilesMatch>

<FilesMatch "\.(woff)$">
  ForceType font/woff
</FilesMatch>

<FilesMatch "\.(ttf)$">
  ForceType application/octet-stream
</FilesMatch>

# Alternative MIME type declarations
AddType text/css .css
AddType application/javascript .js
AddType application/json .json
AddType image/webp .webp
AddType image/jpeg .jpg
AddType image/png .png
AddType image/svg+xml .svg
AddType font/woff2 .woff2
AddType font/woff .woff
AddType application/octet-stream .ttf

# Set headers for better caching and CORS
<IfModule mod_headers.c>
  <FilesMatch "\.(css|js|json|webp|jpg|jpeg|png|svg|woff|woff2|ttf)$">
    Header set Cache-Control "public, max-age=31536000"
  </FilesMatch>
</IfModule>

# Enable compression
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/plain
  AddOutputFilterByType DEFLATE text/html
  AddOutputFilterByType DEFLATE text/xml
  AddOutputFilterByType DEFLATE text/css
  AddOutputFilterByType DEFLATE application/xml
  AddOutputFilterByType DEFLATE application/xhtml+xml
  AddOutputFilterByType DEFLATE application/rss+xml
  AddOutputFilterByType DEFLATE application/javascript
  AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>
